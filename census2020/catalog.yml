sources:
  us_census_data:
    driver: parquet
    args:
      urlpath: "s3://xtechfinals/data/synthetic_people.parquet.zip"
      key: "{{ env.AWS_ACCESS_KEY_ID }}"
      secret: "{{ env.AWS_SECRET_ACCESS_KEY }}"
      token: "{{ env.AWS_SESSION_TOKEN }}"
      storage_options:
        anon: false
    cache:
      - argkey: urlpath
        regex: 's3://xtechfinals'
        type: file
        dest: "cache/census2020.zip"
        method: download
    postprocess:
      - type: unzip
        input: "cache/census2020.zip"
        output: "cache/census2020.parq"
    metadata:
      description: "US 2020 census data in Parquet format"